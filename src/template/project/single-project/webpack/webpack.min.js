/*
 * @Description:webpack-压缩配置
 * @Author: Fu Fei
 * @Date: 2020-12-21 11:14:37
 * @LastEditTime: 2020-12-21 19:44:50
 * @LastEditors: Fu Fei
 * @FilePath: \emit\webpack\webpack.min.js
 */
const TerserPlugin = require("terser-webpack-plugin");

module.exports = {
    minimize: process.env.NODE_ENV == "production",
    minimizer: [
        new TerserPlugin({
            test: /\.js(\?.*)?$/i,
            parallel: true,
            // sourceMap: process.env.DEV_MODEL, // 如果在生产环境中使用 source-maps，必须设置为 true
            terserOptions: {
                // https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions
                format: {
                    comments: false,
                },
                compress: {
                    arrows: false,
                    collapse_vars: false,
                    comparisons: false,
                    computed_props: false,
                    hoist_funs: false,
                    hoist_props: false,
                    hoist_vars: false,
                    inline: false,
                    loops: false,
                    negate_iife: false,
                    properties: false,
                    reduce_funcs: false,
                    reduce_vars: false,
                    switches: false,
                    toplevel: false,
                    typeofs: false,
                    booleans: true,
                    if_return: true,
                    sequences: true,
                    unused: true,
                    conditionals: true,
                    dead_code: true,
                    evaluate: true,
                    drop_console: true,
                    drop_debugger: true,
                },
                mangle: {
                    safari10: true,
                },
            },
        }),
    ],
};
